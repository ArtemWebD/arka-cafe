(()=>{"use strict";var t,e={890:(t,e,n)=>{class o{static orders=[];constructor(t){this._config=t,this._init()}get total(){return o.orders.reduce(((t,e)=>t+=e.count*e.price),0)}add(t){const e=o.orders.find((e=>e.id===t.id));e?e.count+=t.count:o.orders.push(t),this._render()}clear(){o.orders=[],localStorage.removeItem("orders"),this._render()}update(t,e){const n=o.orders.find((e=>e.id===t));n&&(n.count=e,this._render())}remove(t){o.orders=o.orders.filter((e=>e.id!==t)),this._render()}_init(){this._getOrders(),this._setUnloadListener()}_setUnloadListener(){window.onunload=()=>{o.orders&&o.orders.length&&localStorage.setItem("orders",JSON.stringify(o.orders))}}_getOrders(){const t=JSON.parse(localStorage.getItem("orders"));o.orders=t||[],this._render()}_render(){const t=document.getElementById(this._config.id);if(!o.orders||!o.orders.length)return void(t.innerHTML="Корзина");const e=o.orders.reduce(((t,e)=>(t.total+=e.count*e.price,t.count+=e.count,t)),{total:0,count:0});t.innerHTML=`\n      <span id='products'>${e.count} /&nbsp;</span>\n      <span id='total'>${new Intl.NumberFormat("ru").format(e.total)} ₽</span>\n    `,o.orders.forEach((t=>this._renderOrderCount(t)))}_renderOrderCount(t){const e=document.querySelector(`div[data-id="${t.id}"] .dish-count`);e&&(e.innerText=`+ ${t.count}`)}}class s{constructor(t){this.config=t,this.element=document.getElementById(this.config.id),this.count=this.config.count||1,this._init()}get getCount(){return this.count}_init(){this._setListeners()}_setListeners(){this.element.onclick=t=>{const e=t.target.dataset?.action;"plus"===e&&(t.preventDefault(),this._add()),"minus"===e&&(t.preventDefault(),this._subtract())}}_add(){this.count+=1,this._render(),this.config.actionCallback&&this.config.actionCallback(this.count)}_subtract(){this.count!=this.config.min&&(this.count-=1,this._render(),this.config.actionCallback&&this.config.actionCallback(this.count))}_render(){const t=this.element.querySelector(".counter");t&&(t.innerText=this.count)}}class i{constructor(){this.element=document.querySelector(".cart-block"),this.cart=new o({id:"cart"})}init(){this._setClearListener(),this._render()}_setClearListener(){this.element.querySelector(".cart-block__clear-all .btn").onclick=t=>{t.preventDefault(),this.cart.clear(),this._render()}}_render(){const t=this.element.querySelector(".cart-block__orders");this.element.querySelector(".cart-block__total .total-counter").innerText=new Intl.NumberFormat("ru-RU").format(this.cart.total)+" ₽",t.innerHTML="",o.orders.forEach((e=>{const n=this._getHtml(e);t.insertAdjacentHTML("beforeend",n),new s({id:`counter-${e.id}`,count:e.count,min:1,actionCallback:t=>this._updateCount(e.id,t)})})),this._setRemoveListeners()}_getHtml(t){return`\n      <div class="order" data-id='${t.id}'>\n        <div class="order__body">\n          <div class="order__body__image rounded">\n            <img src="${t.image}" alt="${t.title}">\n          </div>\n          <div class="order__body__title">\n            <h3>\n              ${t.title}\n            </h3>\n          </div>\n          <div class="order__body__counter counter-block" id='counter-${t.id}'>\n            <span class="minus" data-action='minus'></span>\n            <span class="counter">${t.count}</span>\n            <span class="plus" data-action='plus'></span>\n          </div>\n          <div class="order__body__price">\n            <span>\n              ${new Intl.NumberFormat("ru-RU").format(t.price*t.count)} ₽\n            </span>\n          </div>\n          <div class="order__body__button">\n            <button class="btn clear-button"></button>\n          </div>\n        </div>\n      </div>\n    `}_updateCount(t,e){this.cart.update(t,e),this._render()}_setRemoveListeners(){this.element.querySelectorAll(".order").forEach((t=>{const e=t.querySelector(".clear-button"),n=t.dataset?.id;e.onclick=t=>{t.preventDefault(),this.cart.remove(+n),this._render()}}))}}class r{constructor(t){this.config=t,this.modal=null,this.modalHtml="",this._init()}_init(){this._listenTriggers()}open(){this.modal&&(this._lockBody(),this.modalHtml=this.modal.innerHTML,this.modal.innerHTML+=this.config.html,this.modal.classList.add("modal-enter"),document.body.insertAdjacentHTML("beforeend",`<div class="blur" data-modal='${this.config.id}' data-action='close'></div>`),setTimeout((()=>{this.modal.classList.remove("modal-enter"),this.modal.classList.add("modal-active")}),this.config.openAnimationDuration+50),this.config.overlayScroll&&this._setOverlayScroll(),this.config.openCallback&&this.config.openCallback(this.modal))}close(){if(!this.modal)return;const t=document.querySelector(".blur");t&&t.remove(),this.modal.classList.remove("modal-active"),this.modal.classList.add("modal-close"),this._unlockBody(),setTimeout((()=>{this.modal.classList.remove("modal-close"),this.modal.innerHTML=this.modalHtml}),this.config.closeAnimationDuration+50)}_listenTriggers(){(this.config.body||document).addEventListener("click",(t=>{const e=t.target.dataset?.modal,n=t.target.dataset?.action;e===this.config.id&&"open"===n&&(t.preventDefault(),this.modal=document.getElementById(e),this.open())})),document.addEventListener("click",(t=>{const e=t.target.dataset?.modal,n=t.target.dataset?.action;e===this.config.id&&"close"===n&&(t.preventDefault(),this.close())}))}_setOverlayScroll(){const t=document.querySelector(".blur");if(!t)return;const e=this.modal.querySelector(".modal__body");t.addEventListener("mousewheel",(t=>{t.preventDefault(),e.scrollTop+=t.deltaY}))}_lockBody(){document.body.style.paddingRight=window.innerWidth-document.body.offsetWidth+"px",document.body.style.overflow="hidden"}_unlockBody(){document.body.style.paddingRight="0",document.body.style.overflow=""}}class a extends r{constructor(t,e){super(e),this.element=t}open(){this.modal&&(this._setPosition(),super.open())}close(){if(!this.modal)return;const t=document.querySelector(".blur");t&&t.remove(),this.modal.classList.remove("modal-active"),this.modal.classList.add("modal-close"),super._unlockBody(),setTimeout((()=>{this.modal.classList.remove("modal-close"),this.modal.innerHTML=this.modalHtml,this._removePosition()}),this.config.closeAnimationDuration+50)}_setPosition(){const t=this._getCoords();this.modal.classList.add("no-animation"),this.modal.style.top=t.top+"px",this.modal.style.left=t.left+"px",this.modal.classList.remove("no-animation")}_removePosition(){this.modal.style.top="",this.modal.style.left=""}_getCoords(){const t=this.element.getBoundingClientRect();return{top:t.y,left:t.x}}}class l{constructor(){this.items=document.querySelectorAll(".dishes__item"),this.cart=new o({id:"cart"})}init(){this._setModal(),this.items.forEach((t=>{this._setCardListener(t,".dishes__item",+t.dataset.id)}))}_setModal(){this.items.forEach((t=>{const e=this._getHtml(t);new a(t,{id:"dishes-modal",html:e,openAnimationDuration:300,closeAnimationDuration:300,body:t,overlayScroll:!0,openCallback:e=>{this._setCardListener(e,".dishes-modal__body",+t.dataset.id),new s({id:"counter",min:1})}})}))}_getHtml(t){const e=t.querySelector(".dishes__item__image img"),n=t.querySelector(".dishes__item__title h3"),o=t.querySelector(".dishes__item__price span");return`\n      <div class='modal__body dishes-modal__body'>\n        <div class='modal__body__image dishes-modal__body__image rounded'>\n          <img src='${e.src}' alt='${e.alt||""}'>\n        </div>\n        <div class='modal__body__title dishes-modal__body__title'>\n          <h3>${n.innerText}</h3>\n        </div>\n        <div class='modal__body__weight dishes-modal__body__weight'>\n          <span>250 г</span>\n        </div>\n        <div class='modal__body__description dishes-modal__body__description'>\n          <span>Песочная основа с творожным муссом, покрытым карамельным соусом с белым шоколадом и кельтской солью.</span>\n        </div>\n        <div class='modal__body__price dishes-modal__body__price'>\n          <span>${o.innerText}</span>\n        </div>\n        <div class='modal__body__button dishes-modal__body__button'>\n          <a href='#' class='basket-button'>Добавить в корзину</a>\n        </div>\n        <div class='modal__body__count dishes-modal__body__count counter-block' id='counter'>\n          <span class='minus' data-action='minus'></span>\n          <span class='counter'>1</span>\n          <span class='plus' data-action='plus'></span>\n        </div>\n      </div>\n  `}_setCardListener(t,e,n){t.querySelector(".basket-button").onclick=o=>{o.preventDefault(),this.cart.add({title:t.querySelector(`${e}__title h3`).innerHTML,image:t.querySelector(`${e}__image img`).src,price:+t.querySelector(`${e}__price`).textContent.replace("₽","").replaceAll(" ",""),count:+t.querySelector(".counter")?.textContent||1,id:n})}}}var d=n(513);class c{constructor(){this.modal=this._createModal()}_createModal(){return new r({id:"feedback",html:"\n  <div class='modal__body feedback__body'>\n    <div class='modal__body__title feedback__body__title'>\n      <span>\n        Оставьте свои контакты и наш менеджер свяжется с вами в ближайшее время\n      </span>\n    </div>\n    <form class='modal__body__form feedback__body__form'>\n      <input type='text' name='name' placeholder='Имя'>\n      <input type='tel' name='phone' placeholder='Телефон'>\n      <button type='submit' class='btn'>Оставить заявку</button>\n      <input type='checkbox' name='agreement' id='agreement' checked='true'>\n      <label for='agreement'>Согласие на обработку персональных данных</label>\n    </form>\n  </div>\n",openAnimationDuration:300,closeAnimationDuration:300,openCallback:t=>{const e=t.querySelector("input[type=tel]");new d.vy(e,{mask:"+7 (000) 000-00-00"}),this._setFormListener(t),this._setCheckboxListener(t)}})}_setFormListener(t){const e=t.querySelector("form");e.onsubmit=t=>{t.preventDefault();const n=Object.values(e).reduce(((t,e)=>(t[e.name]="checkbox"===e.type?e.checked:e.value,t)),{});this._validate(n)&&this._insertFinalBlock()}}_validate(t){return t.name&&t.agreement&&18===t.phone.length}_insertFinalBlock(){if(!this.modal.modal)return;this.modal.modal.querySelector(".modal__body").innerHTML="\n      <div class='modal__body__title feedback__body__title'>\n        <h3>\n          Ваша заявка успешно оставлена\n        </h3>\n      </div>\n      <div class='modal__body__subtitle feedback__body__subtitle'>\n        <span>\n          Для более быстрого подтверждения заявки, <br>\n          вы так же можете позвонить нам по телефону +7 (963) 466-12-26\n        </span>\n      </div>\n      <div class='modal__body__button feedback__body__button'>\n        <button class='btn' data-modal='feedback' data-action='close'>\n          Закрыть\n        </button>\n      </div>\n    ",this.modal.setListeners()}_setCheckboxListener(t){const e=t.querySelector("input[type=checkbox]"),n=t.querySelector('form button[type="submit"]');e.onchange=()=>{n.classList.toggle("visibility-hidden")}}}class _ extends c{constructor(){super()}_createModal(){return new r({id:"cart-feedback",html:"\n  <div class='modal__body feedback__body'>\n    <div class='modal__body__title feedback__body__title'>\n      <span>\n        Оставьте свои контакты и наш менеджер свяжется с вами в ближайшее время\n      </span>\n    </div>\n    <form class='modal__body__form feedback__body__form'>\n      <input type='text' name='name' placeholder='Имя'>\n      <input type='tel' name='phone' placeholder='Телефон'>\n      <button type='submit' class='btn'>Оставить заявку</button>\n      <input type='checkbox' name='agreement' id='agreement' checked='true'>\n      <label for='agreement'>Согласие на обработку персональных данных</label>\n    </form>\n  </div>\n",openAnimationDuration:300,closeAnimationDuration:300,openCallback:t=>{const e=t.querySelector("input[type=tel]");new d.vy(e,{mask:"+7 (000) 000-00-00"}),this._setFormListener(t),super._setCheckboxListener(t)}})}_insertFinalBlock(){if(!this.modal.modal)return;this.modal.modal.querySelector(".modal__body").innerHTML="\n      <div class='modal__body__title feedback__body__title'>\n        <h3>\n          Ваш заказ принят\n        </h3>\n      </div>\n      <div class='modal__body__subtitle feedback__body__subtitle'>\n        <span>\n          Наш менеджер свяжется с вами в ближайшее время,<br>\n          для более быстрого подтверждения заказа,<br>\n          вы так же можете позвонить нам по телефону +7 (963) 466-12-26\n        </span>\n      </div>\n      <div class='modal__body__button feedback__body__button'>\n        <button class='btn' data-modal='cart-feedback' data-action='close'>\n          Закрыть\n        </button>\n      </div>\n    ",this.modal.setListeners()}}class m{constructor(){this._init()}_init(){if("/delivery.html"!==location.pathname&&"/cart.html"!==location.pathname)return;const t=location.search.replace("?","").split("&").find((t=>"category"===t.split("=")[0]));if(!t)return;const e=decodeURIComponent(t.split("=")[1]);document.getElementById("category").innerText=e}}class u{constructor(t,e="image-modal"){this._selectors=t,this._id=e}init(){this._initModals()}_initModals(){this._getElements().forEach((t=>{const e=t.querySelector("img"),n=`\n        <div class='modal__body ${this._id}__body'>\n          <img src='${e?.src}' alt='${e?.alt}'>\n        </div>\n      `;new a(t,{id:this._id,body:t,html:n,openAnimationDuration:300,closeAnimationDuration:300,overlayScroll:!0})}))}_getElements(){return this._selectors.reduce(((t,e)=>{const n=Array.from(document.querySelectorAll(e));return t.push(...n),t}),[])}}var h=n(6);class b{constructor(t){this._triggerElement=document.querySelector(t.triggerElement),this._button=document.querySelector(t.button),this._init()}_init(){this._setObserver(),this._setButtonListener()}_setObserver(){const t={threshold:[+this._triggerElement.dataset?.visible||1,1]};new IntersectionObserver(((t,e)=>{t[0].isIntersecting&&(this._button.classList.add("scroll-visible"),e.unobserve(this._triggerElement))}),t).observe(this._triggerElement)}_setButtonListener(){this._button.onclick=t=>{t.preventDefault(),this._button.classList.contains("scroll-visible")&&document.body.scrollIntoView({behavior:"smooth",block:"start"})}}}window.onload=()=>{new h.tq(".hall-photo__slider",{modules:[h.W_],autoHeight:!0,slidesPerView:2,loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),new h.tq(".banquet-menu__slider",{modules:[h.W_,h.tl],slidesPerView:4,slidesPerGroup:4,spaceBetween:30,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",type:"fraction",renderFraction:(t,e)=>`\n          <span class="${t}"></span>\n           из \n          <span class="${e}"></span>\n        `}});const t=new l,e=new u([".banquet-menu__slide"]),n=new u([".gallery-images__body__item"],"gallery-modal"),o=new i;new c,new _,new m,new b({triggerElement:"#trigger-scroll",button:".scroll-button"}),t.init(),e.init(),n.init(),o.init()}}},n={};function o(t){var s=n[t];if(void 0!==s)return s.exports;var i=n[t]={exports:{}};return e[t](i,i.exports,o),i.exports}o.m=e,t=[],o.O=(e,n,s,i)=>{if(!n){var r=1/0;for(c=0;c<t.length;c++){for(var[n,s,i]=t[c],a=!0,l=0;l<n.length;l++)(!1&i||r>=i)&&Object.keys(o.O).every((t=>o.O[t](n[l])))?n.splice(l--,1):(a=!1,i<r&&(r=i));if(a){t.splice(c--,1);var d=s();void 0!==d&&(e=d)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[n,s,i]},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={179:0};o.O.j=e=>0===t[e];var e=(e,n)=>{var s,i,[r,a,l]=n,d=0;if(r.some((e=>0!==t[e]))){for(s in a)o.o(a,s)&&(o.m[s]=a[s]);if(l)var c=l(o)}for(e&&e(n);d<r.length;d++)i=r[d],o.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return o.O(c)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var s=o.O(void 0,[805],(()=>o(890)));s=o.O(s)})();