(()=>{"use strict";var e,t={765:(e,t,n)=>{const s="cart";class i{constructor(){this._subscribers=[]}subscribe(...e){this._subscribers.push(...e)}unsubscribe(e){this._subscribers=this._subscribers.filter((t=>t!==e))}observe(e){this._subscribers.forEach((t=>t(e)))}}class o{static _orders={};static _observer=new i;constructor(e){this._config=e,this._init()}get total(){return Object.values(o._orders).reduce(((e,t)=>e+=t.count*t.price),0)}get ordersId(){return Object.keys(o._orders)}_init(){this._getOrders(),this._setUnloadListener(),this._config.renderSubscribers&&this._config.renderSubscribers.forEach((e=>{o._observer.subscribe(e)}))}add(e,t){const n=o._orders[t];n?n.count+=1:o._orders[t]=e,this._save(),this._render()}clear(){o._orders={},localStorage.removeItem("orders"),this._render()}update(e,t){const n=o._orders[e];0===t?delete o._orders[e]:n.count=t,this._save(),this._render()}remove(e){delete o._orders[e],this._save(),this._render()}getById(e){return o._orders[e]}_setUnloadListener(){window.onunload=()=>{this._save()}}_save(){localStorage.setItem("orders",JSON.stringify(o._orders))}_getOrders(){const e=localStorage.getItem("orders");o._orders=e&&"undefined"!==e?JSON.parse(e):{},this._render()}_render(){const e=document.getElementById(this._config.id),t=Object.values(o._orders).reduce(((e,t)=>(e.total+=t.count*t.price,e.count+=t.count,e)),{total:0,count:0});t.count?e.innerHTML=`\n        <span id='products'>${t.count} /&nbsp;</span>\n        <span id='total'>${new Intl.NumberFormat("ru").format(t.total)} ₽</span>\n      `:e.innerHTML="Корзина",o._observer.observe(o._orders)}}class r{constructor(e){this.config=e,this.element=e.element,this.count=this.config.count||e.min,this._init()}get getCount(){return this.count}_init(){this._setInitialCount(),this._setListeners()}_setInitialCount(){const e=this.element.querySelector(".counter");e&&(e.innerText=this.count)}_setListeners(){this.element.onclick=e=>{const t=e.target.dataset?.action;"plus"===t&&(e.preventDefault(),this._add()),"minus"===t&&(e.preventDefault(),this._subtract())}}_add(){this.count+=1,this._render(),this.config.actionCallback&&this.config.actionCallback(this.count)}_subtract(){this.count!=this.config.min&&(this.count-=1,this._render(),this.config.actionCallback&&this.config.actionCallback(this.count))}_render(){const e=this.element.querySelector(".counter");e&&(e.innerText=this.count)}}class a{constructor(e){this._element=e,this._id=this._element.dataset?.id,this._cart=new o({id:s,renderSubscribers:[e=>this._update(e)]}),this._order={title:this._element.querySelector(".title").innerHTML,image:this._element.querySelector(".image").src,price:+this._element.querySelector(".price").textContent.replace("₽","").replaceAll(" ",""),count:1},this._init()}_init(){this._setCartTrigger()}_update(e){const t=e[this._id],n=this._element.querySelector(".dish-count");n&&(n.innerText=t?`+ ${t.count}`:"")}_setCartTrigger(){const e=this._element.querySelector(".basket-button");e&&(e.onclick=e=>{e.preventDefault(),this._cart.add(this._order,this._id)})}}class l extends a{constructor(e){super(e),this._order=this._getOrder()}_init(){this._initCounter(),this._setRemoveTrigger()}_getOrder(){const e=this._cart.getById(this._id),t=+this._element.querySelector(".price").textContent.replace("₽","").replaceAll(" ","");return{title:this._element.querySelector(".title").innerHTML,image:this._element.querySelector(".image").src,price:t/e.count,count:1}}_update(e){const t=e[this._id];if(!t)return;const n=this._element.querySelector(".price");n&&(n.innerText=new Intl.NumberFormat("ru-RU").format(t.price*t.count)+" ₽")}_initCounter(){const e=this._cart.getById(this._id);new r({element:this._element.querySelector(".counter-block"),min:1,count:e.count,actionCallback:e=>{const t=this._cart.getById(this._id);!t||t.count<e?this._cart.add(this._order,this._id):this._cart.update(this._id,e)}})}_setRemoveTrigger(){const e=this._element.querySelector(".clear-button");e&&(e.onclick=e=>{e.preventDefault(),this._cart.remove(this._id),this._element.remove()})}}class c{constructor(){this.element=document.querySelector(".cart-block"),this.cart=new o({id:s,renderSubscribers:[()=>this._update()]})}init(){this._setClearListener(),this._render()}_setClearListener(){if(!this.element)return;this.element.querySelector(".cart-block__clear-all .btn").onclick=e=>{e.preventDefault(),this.cart.clear(),this._render()}}_update(){if(!this.element)return;this.element.querySelector(".cart-block__total .total-counter").innerText=new Intl.NumberFormat("ru-RU").format(this.cart.total)+" ₽"}_render(){if(!this.element)return;const e=this.element.querySelector(".cart-block__orders"),t=this.cart.ordersId;e.innerHTML="",t.forEach((t=>{const n=this.cart.getById(t),s=this._getHtml(n,t);e.insertAdjacentHTML("beforeend",s);const i=e.querySelector(`.order[data-id="${t}"]`);new l(i)}))}_getHtml(e,t){return`\n      <div class="order" data-id='${t}'>\n        <div class="order__body">\n          <div class="order__body__image rounded">\n            <img src="${e.image}" alt="${e.title}" class='image'>\n          </div>\n          <div class="order__body__title">\n            <h3 class='title'>\n              ${e.title}\n            </h3>\n          </div>\n          <div class="order__body__counter counter-block">\n            <span class="minus" data-action='minus'></span>\n            <span class="counter">${e.count}</span>\n            <span class="plus" data-action='plus'></span>\n          </div>\n          <div class="order__body__price">\n            <span class='price'>\n              ${new Intl.NumberFormat("ru-RU").format(e.price*e.count)} ₽\n            </span>\n          </div>\n          <div class="order__body__button">\n            <button class="btn clear-button"></button>\n          </div>\n        </div>\n      </div>\n    `}}class d{constructor(e){this.config=e,this.modal=null,this.modalHtml="",this._init()}_init(){this._listenTriggers()}open(){this.modal&&(this._lockBody(),this.modalHtml=this.modal.innerHTML,this.modal.innerHTML+=this.config.html,this.modal.classList.add("modal-enter"),document.body.insertAdjacentHTML("beforeend",`<div class="blur" data-modal='${this.config.id}' data-action='close'></div>`),setTimeout((()=>{this.modal.classList.remove("modal-enter"),this.modal.classList.add("modal-active")}),this.config.openAnimationDuration+50),this.config.overlayScroll&&this._setOverlayScroll(),this.config.openCallback&&this.config.openCallback(this.modal))}close(){if(!this.modal)return;const e=document.querySelector(".blur");e&&e.remove(),this.modal.classList.remove("modal-active"),this.modal.classList.add("modal-close"),this._unlockBody(),setTimeout((()=>{this.modal.classList.remove("modal-close"),this.modal.innerHTML=this.modalHtml}),this.config.closeAnimationDuration+50)}_listenTriggers(){(this.config.body||document).addEventListener("click",(e=>{const t=e.target.dataset?.modal,n=e.target.dataset?.action;t===this.config.id&&"open"===n&&(e.preventDefault(),this.modal=document.getElementById(t),this.open())})),document.addEventListener("click",(e=>{const t=e.target.dataset?.modal,n=e.target.dataset?.action;t===this.config.id&&"close"===n&&(e.preventDefault(),this.close())}))}_setOverlayScroll(){const e=document.querySelector(".blur");e&&e.addEventListener("mousewheel",(e=>{e.preventDefault(),this.modal.scrollTop+=e.deltaY}))}_lockBody(){document.body.style.paddingRight=window.innerWidth-document.body.offsetWidth+"px",document.body.style.overflow="hidden"}_unlockBody(){document.body.style.paddingRight="0",document.body.style.overflow=""}}class _ extends d{constructor(e,t){super(t),this.element=e}open(){this.modal&&(this._setPosition(),super.open())}close(){if(!this.modal)return;const e=document.querySelector(".blur");e&&e.remove(),this.modal.classList.remove("modal-active"),this.modal.classList.add("modal-close"),super._unlockBody(),setTimeout((()=>{this.modal.classList.remove("modal-close"),this.modal.innerHTML=this.modalHtml,this._removePosition()}),this.config.closeAnimationDuration+50)}_setPosition(){const e=this._getCoords();this.modal.classList.add("no-animation"),this.modal.style.top=e.top+"px",this.modal.style.left=e.left+"px",this.modal.classList.remove("no-animation")}_removePosition(){this.modal.style.top="",this.modal.style.left=""}_getCoords(){const e=this.element.getBoundingClientRect();return{top:e.y,left:e.x}}}class u extends a{constructor(e){super(e)}_init(){super._setCartTrigger(),this._initCounter()}_update(e){const t=e[this._id];this._element.querySelector("#counter .counter").innerText=t?t.count:0}_initCounter(){const e=this._cart.getById(this._id),t=this._element.querySelector("#counter"),n=t.querySelector(".counter"),s=t.querySelector(".plus"),i=t.querySelector(".minus");n.innerText=e?e.count:0,s.onclick=()=>this._cart.add(this._order,this._id),i.onclick=()=>{e&&e.count>0&&this._cart.update(this._id,e.count-1)}}}class h{constructor(){this.items=document.querySelectorAll(".dishes__item")}init(){this._setModal(),this.items.forEach((e=>{new a(e)}))}_setModal(){this.items.forEach((e=>{const t=this._getHtml(e);new _(e,{id:"dishes-modal",html:t,openAnimationDuration:300,closeAnimationDuration:300,body:e,overlayScroll:!0,openCallback:e=>new u(e.querySelector(".modal__body"))})}))}_getHtml(e){const t=e.querySelector(".dishes__item__image img"),n=e.querySelector(".dishes__item__title h3"),s=e.querySelector(".dishes__item__price span");return`\n      <div class='modal__body dishes-modal__body' data-id='${e.dataset?.id}'>\n        <div class='modal__body__image dishes-modal__body__image rounded'>\n          <img src='${t.src}' alt='${t.alt||""}' class='image'>\n        </div>\n        <div class='modal__body__title dishes-modal__body__title'>\n          <h3 class='title'>${n.innerText}</h3>\n        </div>\n        <div class='modal__body__weight dishes-modal__body__weight'>\n          <span>250 г</span>\n        </div>\n        <div class='modal__body__description dishes-modal__body__description'>\n          <span>Песочная основа с творожным муссом, покрытым карамельным соусом с белым шоколадом и кельтской солью.</span>\n        </div>\n        <div class='modal__body__price dishes-modal__body__price'>\n          <span class='price'>${s.innerText}</span>\n        </div>\n        <div class='modal__body__button dishes-modal__body__button'>\n          <a href='#' class='basket-button'>\n            Добавить в корзину\n          </a>\n        </div>\n        <div class='modal__body__count dishes-modal__body__count counter-block' id='counter'>\n          <span class='minus' data-action='minus'></span>\n          <span class='counter'></span>\n          <span class='plus' data-action='plus'></span>\n        </div>\n      </div>\n  `}}var m=n(513);class b{constructor(){this.modal=this._createModal()}_createModal(){return new d({id:"feedback",html:"\n  <div class='modal__body feedback__body'>\n    <div class='modal__body__title feedback__body__title'>\n      <span>\n        Оставьте свои контакты и наш менеджер свяжется с вами в ближайшее время\n      </span>\n    </div>\n    <form class='modal__body__form feedback__body__form'>\n      <input type='text' name='name' placeholder='Имя'>\n      <input type='tel' name='phone' placeholder='Телефон'>\n      <button type='submit' class='btn'>Оставить заявку</button>\n      <input type='checkbox' name='agreement' id='agreement' checked='true'>\n      <label for='agreement'>Согласие на обработку персональных данных</label>\n    </form>\n  </div>\n",openAnimationDuration:300,closeAnimationDuration:300,openCallback:e=>{const t=e.querySelector("input[type=tel]");new m.vy(t,{mask:"+7 (000) 000-00-00"}),this._setFormListener(e),this._setCheckboxListener(e)}})}_setFormListener(e){const t=e.querySelector("form");t.onsubmit=e=>{e.preventDefault();const n=Object.values(t).reduce(((e,t)=>(e[t.name]="checkbox"===t.type?t.checked:t.value,e)),{});this._validate(n)&&this._insertFinalBlock()}}_validate(e){return e.name&&e.agreement&&18===e.phone.length}_insertFinalBlock(){if(!this.modal.modal)return;this.modal.modal.querySelector(".modal__body").innerHTML="\n      <div class='modal__body__title feedback__body__title'>\n        <h3>\n          Ваша заявка успешно оставлена\n        </h3>\n      </div>\n      <div class='modal__body__subtitle feedback__body__subtitle'>\n        <span>\n          Для более быстрого подтверждения заявки, <br>\n          вы так же можете позвонить нам по телефону +7 (963) 466-12-26\n        </span>\n      </div>\n      <div class='modal__body__button feedback__body__button'>\n        <button class='btn' data-modal='feedback' data-action='close'>\n          Закрыть\n        </button>\n      </div>\n    ",this.modal.setListeners()}_setCheckboxListener(e){const t=e.querySelector("input[type=checkbox]"),n=e.querySelector('form button[type="submit"]');t.onchange=()=>{n.classList.toggle("visibility-hidden")}}}class p extends b{constructor(){super()}_createModal(){return new d({id:"cart-feedback",html:"\n  <div class='modal__body feedback__body'>\n    <div class='modal__body__title feedback__body__title'>\n      <span>\n        Оставьте свои контакты и наш менеджер свяжется с вами в ближайшее время\n      </span>\n    </div>\n    <form class='modal__body__form feedback__body__form'>\n      <input type='text' name='name' placeholder='Имя'>\n      <input type='tel' name='phone' placeholder='Телефон'>\n      <button type='submit' class='btn'>Оставить заявку</button>\n      <input type='checkbox' name='agreement' id='agreement' checked='true'>\n      <label for='agreement'>Согласие на обработку персональных данных</label>\n    </form>\n  </div>\n",openAnimationDuration:300,closeAnimationDuration:300,openCallback:e=>{const t=e.querySelector("input[type=tel]");new m.vy(t,{mask:"+7 (000) 000-00-00"}),this._setFormListener(e),super._setCheckboxListener(e)}})}_insertFinalBlock(){if(!this.modal.modal)return;this.modal.modal.querySelector(".modal__body").innerHTML="\n      <div class='modal__body__title feedback__body__title'>\n        <h3>\n          Ваш заказ принят\n        </h3>\n      </div>\n      <div class='modal__body__subtitle feedback__body__subtitle'>\n        <span>\n          Наш менеджер свяжется с вами в ближайшее время,<br>\n          для более быстрого подтверждения заказа,<br>\n          вы так же можете позвонить нам по телефону +7 (963) 466-12-26\n        </span>\n      </div>\n      <div class='modal__body__button feedback__body__button'>\n        <button class='btn' data-modal='cart-feedback' data-action='close'>\n          Закрыть\n        </button>\n      </div>\n    ",this.modal.setListeners()}}class y{constructor(){this._init()}_init(){"/delivery.html"!==location.pathname&&"/cart.html"!==location.pathname||(this._getCategory(),this._setLinkTrigger())}_getCategory(){const e=location.search.replace("?","").split("&").find((e=>"category"===e.split("=")[0]));e&&this._changeTitle(e.split("=")[1])}_setLinkTrigger(){document.body.onclick=e=>{const t=e.target.dataset?.category;t&&(e.preventDefault(),this._changeTitle(t),this._changeUrl(t))}}_setPopstateListener(){window.onpopstate=()=>this._getCategory()}_changeTitle(e){const t=decodeURI(decodeURI(e));document.getElementById("category").innerText=t}_changeUrl(e){const t=new URL(location.href);t.searchParams.set("category",encodeURI(e)),history.replaceState({category:e},"Document",t.href)}}class g{constructor(e,t="image-modal"){this._selectors=e,this._id=t}init(){this._initModals()}_initModals(){this._getElements().forEach((e=>{const t=e.querySelector("img"),n=`\n        <div class='modal__body ${this._id}__body'>\n          <img src='${t?.src}' alt='${t?.alt}'>\n        </div>\n      `;new _(e,{id:this._id,body:e,html:n,openAnimationDuration:300,closeAnimationDuration:300,overlayScroll:!0})}))}_getElements(){return this._selectors.reduce(((e,t)=>{const n=Array.from(document.querySelectorAll(t));return e.push(...n),e}),[])}}var v=n(6);class f{constructor(e){this._triggerElement=document.querySelector(e.triggerElement),this._button=document.querySelector(e.button),this._init()}_init(){this._setObserver(),this._setButtonListener()}_setObserver(){const e={threshold:[+this._triggerElement.dataset?.visible||1,1]};new IntersectionObserver(((e,t)=>{e[0].isIntersecting&&(this._button.classList.add("scroll-visible"),t.unobserve(this._triggerElement))}),e).observe(this._triggerElement)}_setButtonListener(){this._button.onclick=e=>{e.preventDefault(),this._button.classList.contains("scroll-visible")&&document.body.scrollIntoView({behavior:"smooth",block:"start"})}}}window.onload=()=>{new v.tq(".hall-photo__slider",{modules:[v.W_],autoHeight:!0,slidesPerView:2,loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),new v.tq(".banquet-menu__slider",{modules:[v.W_,v.tl],slidesPerView:4,slidesPerGroup:4,spaceBetween:30,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",type:"fraction",renderFraction:(e,t)=>`\n          <span class="${e}"></span>\n           из \n          <span class="${t}"></span>\n        `}});const e=new h,t=new g([".banquet-menu__slide"]),n=new g([".gallery-images__body__item"],"gallery-modal"),s=new c;new b,new p,new y,new f({triggerElement:"#trigger-scroll",button:".scroll-button"}),e.init(),t.init(),n.init(),s.init()}}},n={};function s(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,s),o.exports}s.m=t,e=[],s.O=(t,n,i,o)=>{if(!n){var r=1/0;for(d=0;d<e.length;d++){for(var[n,i,o]=e[d],a=!0,l=0;l<n.length;l++)(!1&o||r>=o)&&Object.keys(s.O).every((e=>s.O[e](n[l])))?n.splice(l--,1):(a=!1,o<r&&(r=o));if(a){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,i,o]},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var i,o,[r,a,l]=n,c=0;if(r.some((t=>0!==e[t]))){for(i in a)s.o(a,i)&&(s.m[i]=a[i]);if(l)var d=l(s)}for(t&&t(n);c<r.length;c++)o=r[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=s.O(void 0,[805],(()=>s(765)));i=s.O(i)})();