(()=>{"use strict";var e,t={706:(e,t,s)=>{const n="cart";class i{constructor(){this._subscribers=[]}subscribe(...e){this._subscribers.push(...e)}unsubscribe(e){this._subscribers=this._subscribers.filter((t=>t!==e))}observe(e){this._subscribers.forEach((t=>t(e)))}}class o{static _orders={};static _observer=new i;constructor(e){this._config=e,this._init()}get total(){return Object.values(o._orders).reduce(((e,t)=>e+=t.count*t.price),0)}get ordersId(){return Object.keys(o._orders)}_init(){this._getOrders(),this._setUnloadListener(),this._config.renderSubscribers&&this._config.renderSubscribers.forEach((e=>{o._observer.subscribe(e)}))}add(e,t){const s=o._orders[t];s?s.count+=1:o._orders[t]=e,this._save(),this._render()}clear(){o._orders={},localStorage.removeItem("orders"),this._render()}update(e,t){const s=o._orders[e];0===t?delete o._orders[e]:s.count=t,this._save(),this._render()}remove(e){delete o._orders[e],this._save(),this._render()}getById(e){return o._orders[e]}_setUnloadListener(){window.onunload=()=>{this._save()}}_save(){localStorage.setItem("orders",JSON.stringify(o._orders))}_getOrders(){const e=localStorage.getItem("orders");o._orders=e&&"undefined"!==e?JSON.parse(e):{},this._render()}_render(){o._observer.observe(o._orders);const e=document.getElementById(this._config.id);if(!o._orders)return void(e.innerHTML='<span class="default-text">Корзина</span>');const t=Object.values(o._orders).reduce(((e,t)=>(e.total+=t.count*t.price,e.count+=t.count,e)),{total:0,count:0});t.count?e.innerHTML=`\n        <span id='products'>${t.count}</span>\n        <span id='total'>${new Intl.NumberFormat("ru").format(t.total)} ₽</span>\n      `:e.innerHTML='<span id="default-cart-text">Корзина</span>'}}class r{constructor(e){this.config=e,this.element=e.element,this.count=this.config.count||e.min,this._init()}get getCount(){return this.count}_init(){this._setInitialCount(),this._setListeners()}_setInitialCount(){const e=this.element.querySelector(".counter");e&&(e.innerText=this.count)}_setListeners(){this.element.onclick=e=>{const t=e.target.dataset?.action;"plus"===t&&(e.preventDefault(),this._add()),"minus"===t&&(e.preventDefault(),this._subtract())}}_add(){this.count+=1,this._render(),this.config.actionCallback&&this.config.actionCallback(this.count)}_subtract(){this.count!=this.config.min&&(this.count-=1,this._render(),this.config.actionCallback&&this.config.actionCallback(this.count))}_render(){const e=this.element.querySelector(".counter");e&&(e.innerText=this.count)}}class a{constructor(e){this._element=e,this._id=this._element.dataset?.id,this._cart=new o({id:n,renderSubscribers:[e=>this._update(e)]}),this._order={title:this._element.querySelector(".title").innerHTML,image:this._element.querySelector(".image").src,price:+this._element.querySelector(".price").textContent.replace("₽","").replaceAll(" ",""),count:1},this._init()}_init(){this._setCartTrigger()}_update(e){const t=e[this._id],s=this._element.querySelector(".dish-count");s&&(s.innerText=t?`+ ${t.count}`:"")}_setCartTrigger(){const e=this._element.querySelector(".basket-button");e&&(e.onclick=e=>{e.preventDefault(),this._cart.add(this._order,this._id)})}}class l extends a{constructor(e){super(e),this._order=this._getOrder()}_init(){this._initCounter(),this._setRemoveTrigger()}_getOrder(){const e=this._cart.getById(this._id),t=+this._element.querySelector(".price").textContent.replace("₽","").replaceAll(" ","");return{title:this._element.querySelector(".title").innerHTML,image:this._element.querySelector(".image").src,price:t/e.count,count:1}}_update(e){const t=e[this._id];if(!t)return;const s=this._element.querySelector(".price");s&&(s.innerText=new Intl.NumberFormat("ru-RU").format(t.price*t.count)+" ₽")}_initCounter(){const e=this._cart.getById(this._id);new r({element:this._element.querySelector(".counter-block"),min:1,count:e.count,actionCallback:e=>{const t=this._cart.getById(this._id);!t||t.count<e?this._cart.add(this._order,this._id):this._cart.update(this._id,e)}})}_setRemoveTrigger(){const e=this._element.querySelector(".clear-button");e&&(e.onclick=e=>{e.preventDefault(),this._cart.remove(this._id),this._element.remove()})}}class c{constructor(){this.element=document.querySelector(".cart-block"),this.cart=new o({id:n,renderSubscribers:[()=>this._update()]})}init(){this._setClearListener(),this._render()}_setClearListener(){if(!this.element)return;this.element.querySelector(".cart-block__clear-all .btn").onclick=e=>{e.preventDefault(),this.cart.clear(),this._render()}}_update(){if(!this.element)return;this.element.querySelector(".cart-block__total .total-counter").innerText=new Intl.NumberFormat("ru-RU").format(this.cart.total)+" ₽"}_render(){if(!this.element)return;const e=this.element.querySelector(".cart-block__orders"),t=this.cart.ordersId;e.innerHTML="",t.forEach((t=>{const s=this.cart.getById(t),n=this._getHtml(s,t);e.insertAdjacentHTML("beforeend",n);const i=e.querySelector(`.order[data-id="${t}"]`);new l(i)}))}_getHtml(e,t){return`\n      <div class="order" data-id='${t}'>\n        <div class="order__body">\n          <div class="order__body__image rounded">\n            <img src="${e.image}" alt="${e.title}" class='image'>\n          </div>\n          <div class="order__body__title">\n            <h3 class='title'>\n              ${e.title}\n            </h3>\n          </div>\n          <div class="order__body__counter counter-block">\n            <span class="minus" data-action='minus'></span>\n            <span class="counter">${e.count}</span>\n            <span class="plus" data-action='plus'></span>\n          </div>\n          <div class="order__body__price">\n            <span class='price'>\n              ${new Intl.NumberFormat("ru-RU").format(e.price*e.count)} ₽\n            </span>\n          </div>\n          <div class="order__body__button">\n            <button class="btn clear-button"></button>\n          </div>\n        </div>\n      </div>\n    `}}class d{constructor(e){this.config=e,this.modal=null,this.modalHtml="",this._init()}_init(){this._listenTriggers()}open(){this.modal&&(this._lockBody(),this.modalHtml=this.modal.innerHTML,this.modal.innerHTML+=this.config.html,this.modal.classList.add("modal-enter"),document.body.insertAdjacentHTML("beforeend",`<div class="blur" data-modal='${this.config.id}' data-action='close'></div>`),setTimeout((()=>{this.modal.classList.remove("modal-enter"),this.modal.classList.add("modal-active")}),this.config.openAnimationDuration+50),this.config.overlayScroll&&this._setOverlayScroll(),this.config.openCallback&&this.config.openCallback(this.modal))}close(){if(!this.modal)return;const e=document.querySelector(".blur");e&&e.remove(),this.modal.classList.remove("modal-active"),this.modal.classList.add("modal-close"),this._unlockBody(),setTimeout((()=>{this.modal.classList.remove("modal-close"),this.modal.innerHTML=this.modalHtml}),this.config.closeAnimationDuration+50)}_listenTriggers(){(this.config.body||document).addEventListener("click",(e=>{const t=e.target.dataset?.modal,s=e.target.dataset?.action;t===this.config.id&&"open"===s&&(e.preventDefault(),this.modal=document.getElementById(t),this.open())})),document.addEventListener("click",(e=>{const t=e.target.dataset?.modal,s=e.target.dataset?.action;t===this.config.id&&"close"===s&&(e.preventDefault(),this.close())}))}_setOverlayScroll(){const e=document.querySelector(".blur");e&&e.addEventListener("mousewheel",(e=>{e.preventDefault(),this.modal.scrollTop+=e.deltaY}))}_lockBody(){document.body.style.paddingRight=window.innerWidth-document.body.offsetWidth+"px",document.body.style.overflow="hidden"}_unlockBody(){document.body.style.paddingRight="0",document.body.style.overflow=""}}class _ extends d{constructor(e,t){super(t),this.element=e}open(){this.modal&&(this._setPosition(),super.open())}close(){if(!this.modal)return;const e=document.querySelector(".blur");e&&e.remove(),this.modal.classList.remove("modal-active"),this.modal.classList.add("modal-close"),super._unlockBody(),setTimeout((()=>{this.modal.classList.remove("modal-close"),this.modal.innerHTML=this.modalHtml,this._removePosition()}),this.config.closeAnimationDuration+50)}_setPosition(){const e=this._getCoords();this.modal.classList.add("no-animation"),this.modal.style.top=e.top+"px",this.modal.style.left=e.left+"px",this.modal.classList.remove("no-animation")}_removePosition(){this.modal.style.top="",this.modal.style.left=""}_getCoords(){const e=this.element.getBoundingClientRect();return{top:e.y,left:e.x}}}class u extends a{constructor(e){super(e)}_init(){super._setCartTrigger(),this._initCounter()}_update(e){const t=e[this._id];this._element.querySelector("#counter .counter").innerText=t?t.count:0}_initCounter(){const e=this._cart.getById(this._id),t=this._element.querySelector("#counter"),s=t.querySelector(".counter"),n=t.querySelector(".plus"),i=t.querySelector(".minus");s.innerText=e?e.count:0,n.onclick=()=>this._cart.add(this._order,this._id),i.onclick=()=>{const e=this._cart.getById(this._id);e&&e.count>0&&this._cart.update(this._id,e.count-1)}}}class h{constructor(){this.items=document.querySelectorAll(".dishes__item")}init(){this._setModal(),this.items.forEach((e=>{new a(e)}))}_setModal(){this.items.forEach((e=>{const t=this._getHtml(e);new _(e,{id:"dishes-modal",html:t,openAnimationDuration:300,closeAnimationDuration:300,body:e,overlayScroll:!0,openCallback:e=>new u(e.querySelector(".modal__body"))})}))}_getHtml(e){const t=e.querySelector(".dishes__item__image img"),s=e.querySelector(".dishes__item__title h3"),n=e.querySelector(".dishes__item__price span");return`\n      <div class='modal__body dishes-modal__body' data-id='${e.dataset?.id}'>\n        <div class='modal__body__image dishes-modal__body__image rounded'>\n          <img src='${t.src}' alt='${t.alt||""}' class='image'>\n        </div>\n        <div class='modal__body__title dishes-modal__body__title'>\n          <h3 class='title'>${s.innerHTML}</h3>\n        </div>\n        <div class='modal__body__weight dishes-modal__body__weight'>\n          <span>250 г</span>\n        </div>\n        <div class='modal__body__description dishes-modal__body__description'>\n          <span>Песочная основа с творожным муссом, покрытым карамельным соусом с белым шоколадом \n          <br class='mobile-line-break'>и кельтской солью.</span>\n        </div>\n        <div class='modal__body__price dishes-modal__body__price'>\n          <span class='price'>${n.innerText}</span>\n        </div>\n        <div class='dishes-modal__body__buttons'>\n          <div class='modal__body__button dishes-modal__body__button'>\n            <a href='#' class='basket-button'>\n              Добавить в корзину\n            </a>\n          </div>\n          <div class='modal__body__count dishes-modal__body__count counter-block' id='counter'>\n            <span class='minus' data-action='minus'></span>\n            <span class='counter'></span>\n            <span class='plus' data-action='plus'></span>\n          </div>\n        </div>\n        <div class='mobile-close' data-modal='dishes-modal' data-action='close'>\n          <a href="#" data-modal='dishes-modal' data-action='close'>\n            <span data-modal='dishes-modal' data-action='close'>\n              Закрыть\n            </span>\n          </a>\n        </div>\n      </div>\n  `}}class m{constructor(e){this._burger=document.querySelector(e.burgerSelector),this._menu=document.querySelector(e.menuSelector),this._init()}_init(){this._setBurgerListener()}_setBurgerListener(){if(!this._burger)throw new Error("Burger element was not found");this._burger.onclick=e=>{e.preventDefault(),this._burger.classList.toggle("burger_active"),this._menu.classList.toggle("mobile-nav_active"),this._toggleOverlay(),this._lockBody()}}_toggleOverlay(){if(this._burger.classList.contains("burger_active"))return document.body.insertAdjacentHTML("beforeend",'<div class="mobile-overlay"></div>');document.querySelector(".mobile-overlay").remove()}_lockBody(){document.body.style.overflow=this._burger.classList.contains("burger_active")?"hidden":"auto"}}var b=s(513);class p{constructor(){this.modal=this._createModal()}_createModal(){return new d({id:"feedback",html:"\n  <div class='modal__body feedback__body'>\n    <div class='modal__body__title feedback__body__title'>\n      <span>\n        Оставьте свои контакты <br class='mobile-line-break'>и наш менеджер свяжется с вами в ближайшее время\n      </span>\n    </div>\n    <form class='modal__body__form feedback__body__form'>\n      <input type='text' name='name' placeholder='Имя'>\n      <input type='tel' name='phone' placeholder='Телефон'>\n      <button type='submit' class='btn mobile-btn'>Оставить заявку</button>\n      <input type='checkbox' name='agreement' id='agreement' checked='true'>\n      <label for='agreement'>Согласие на обработку персональных данных</label>\n    </form>\n  </div>\n",openAnimationDuration:300,closeAnimationDuration:300,openCallback:e=>{const t=e.querySelector("input[type=tel]");new b.vy(t,{mask:"+7 (000) 000-00-00"}),this._setFormListener(e),this._setCheckboxListener(e)}})}_setFormListener(e){const t=e.querySelector("form");t.onsubmit=e=>{e.preventDefault();const s=Object.values(t).reduce(((e,t)=>(e[t.name]="checkbox"===t.type?t.checked:t.value,e)),{});this._validate(s)&&this._insertFinalBlock()}}_validate(e){return e.name&&e.agreement&&18===e.phone.length}_insertFinalBlock(){if(!this.modal.modal)return;this.modal.modal.querySelector(".modal__body").innerHTML="\n      <div class='modal__body__title feedback__body__title feedback__body__title_final'>\n        <h3>\n          Ваша заявка <br class='mobile-line-break'>успешно оставлена\n        </h3>\n      </div>\n      <div class='modal__body__subtitle feedback__body__subtitle'>\n        <span>\n          Для более быстрого подтверждения заявки, <br>\n          вы так же можете позвонить нам <br class='mobile-line-break'>по телефону\n        </span>\n        <span class='feedback__body__phone'>\n          +7 (963) 466-12-26\n        </span>\n      </div>\n      <div class='modal__body__button feedback__body__button'>\n        <button class='btn mobile-btn' data-modal='feedback' data-action='close'>\n          Закрыть\n        </button>\n      </div>\n    ",this.modal.setListeners()}_setCheckboxListener(e){const t=e.querySelector("input[type=checkbox]"),s=e.querySelector('form button[type="submit"]');t.onchange=()=>{s.classList.toggle("visibility-hidden")}}}class g extends p{constructor(){super()}_createModal(){return new d({id:"cart-feedback",html:"\n  <div class='modal__body feedback__body'>\n    <div class='modal__body__title feedback__body__title'>\n      <span>\n        Оставьте свои контакты и наш менеджер свяжется с вами в ближайшее время\n      </span>\n    </div>\n    <form class='modal__body__form feedback__body__form'>\n      <input type='text' name='name' placeholder='Имя'>\n      <input type='tel' name='phone' placeholder='Телефон'>\n      <button type='submit' class='btn mobile-btn'>Оставить заявку</button>\n      <input type='checkbox' name='agreement' id='agreement' checked='true'>\n      <label for='agreement'>Согласие на обработку персональных данных</label>\n    </form>\n  </div>\n",openAnimationDuration:300,closeAnimationDuration:300,openCallback:e=>{const t=e.querySelector("input[type=tel]");new b.vy(t,{mask:"+7 (000) 000-00-00"}),this._setFormListener(e),super._setCheckboxListener(e)}})}_insertFinalBlock(){if(!this.modal.modal)return;this.modal.modal.querySelector(".modal__body").innerHTML="\n      <div class='modal__body__title feedback__body__title feedback__body__title_final'>\n        <h3>\n          Ваш заказ принят\n        </h3>\n      </div>\n      <div class='modal__body__subtitle feedback__body__subtitle'>\n        <span>\n          Наш менеджер свяжется <br class='mobile-line-break'>с вами в ближайшее время,<br>\n          для более быстрого подтверждения заказа,<br>\n          вы так же можете позвонить нам по телефону\n        </span>\n        <span class='feedback__body__phone'>\n          +7 (963) 466-12-26\n        </span>\n      </div>\n      <div class='modal__body__button feedback__body__button'>\n        <button class='btn mobile-btn' data-modal='cart-feedback' data-action='close'>\n          Закрыть\n        </button>\n      </div>\n    ",this.modal.setListeners()}}class y{constructor(){this._init()}_init(){document.fonts.onloadingdone=()=>{"/delivery.html"!==location.pathname&&"/cart.html"!==location.pathname||(this._getCategory(),this._setLinkTrigger())}}_getCategory(){const e=location.search.replace("?","").split("&").find((e=>"category"===e.split("=")[0]));e&&this._changeTitle(e.split("=")[1])}_setLinkTrigger(){document.body.onclick=e=>{const t=e.target.dataset?.category;t&&(e.preventDefault(),this._changeTitle(t),this._changeUrl(t))}}_setPopstateListener(){window.onpopstate=()=>this._getCategory()}_changeTitle(e){const t=decodeURI(decodeURI(e));document.getElementById("category").innerText=t}_changeUrl(e){const t=new URL(location.href);t.searchParams.set("category",encodeURI(e)),history.replaceState({category:e},"Document",t.href)}}class v{constructor(e,t="image-modal"){this._selectors=e,this._id=t}init(){this._initModals()}_initModals(){this._getElements().forEach((e=>{const t=e.querySelector("img"),s=e.querySelector(".slide__number"),n=`\n        <div class='modal__body ${this._id}__body'>\n          ${s?`\n                  <div class='modal__number'>\n                    <span>\n                      ${s?.innerText}\n                    </span>\n                  </div>\n                `:""}\n          <img class='lightbox' src='${t?.src}' alt='${t?.alt}'>\n        </div>\n      `;new _(e,{id:this._id,body:e,html:n,openAnimationDuration:300,closeAnimationDuration:300,overlayScroll:!0})}))}_getElements(){return this._selectors.reduce(((e,t)=>{const s=Array.from(document.querySelectorAll(t));return e.push(...s),e}),[])}}var f=s(6);class k{constructor(){this._init()}_init(){this._setListener()}_setListener(){document.body.onclick=e=>{const t=e.target;t.classList.contains("lightbox")&&(e.preventDefault(),t.classList.toggle("lightbox_active"))}}}class w{constructor(e){this._triggerElement=document.querySelector(e.triggerElement),this._button=document.querySelector(e.button),this._init()}_init(){this._setObserver(),this._setButtonListener()}_setObserver(){const e={threshold:[+this._triggerElement.dataset?.visible||1,1]};new IntersectionObserver(((e,t)=>{e[0].isIntersecting&&(this._button.classList.add("scroll-visible"),t.unobserve(this._triggerElement))}),e).observe(this._triggerElement)}_setButtonListener(){this._button.onclick=e=>{e.preventDefault(),this._button.classList.contains("scroll-visible")&&document.body.scrollIntoView({behavior:"smooth",block:"start"})}}}window.onload=()=>{new f.tq(".hall-photo__slider",{modules:[f.W_],autoHeight:!0,slidesPerView:2,loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{1250:{slidesPerView:2,spaceBetween:0},300:{slidesPerView:1,spaceBetween:15}}}),new f.tq(".banquet-menu__slider",{modules:[f.W_,f.tl],slidesPerView:4,slidesPerGroup:4,spaceBetween:30,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",type:"fraction",renderFraction:(e,t)=>`\n          <span class="${e}"></span>\n           из \n          <span class="${t}"></span>\n        `},breakpoints:{1250:{slidesPerView:4,spaceBetween:30,slidesPerGroup:4},300:{slidesPerView:2,spaceBetween:10,slidesPerGroup:2}}}),new f.tq(".images-slider__slider",{slidesPerView:1,slidesPerGroup:1,spaceBetween:15,loop:!0});const e=new h,t=new v([".banquet-menu__slide"]),s=new v([".gallery-images__body__item",".slide__image"],"gallery-modal"),n=new c;new p,new g,new y,new w({triggerElement:"#trigger-scroll",button:".scroll-button"}),new m({burgerSelector:".burger",menuSelector:".mobile-nav"}),window.innerWidth<=1250&&new k,e.init(),t.init(),s.init(),n.init()}}},s={};function n(e){var i=s[e];if(void 0!==i)return i.exports;var o=s[e]={exports:{}};return t[e](o,o.exports,n),o.exports}n.m=t,e=[],n.O=(t,s,i,o)=>{if(!s){var r=1/0;for(d=0;d<e.length;d++){for(var[s,i,o]=e[d],a=!0,l=0;l<s.length;l++)(!1&o||r>=o)&&Object.keys(n.O).every((e=>n.O[e](s[l])))?s.splice(l--,1):(a=!1,o<r&&(r=o));if(a){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[s,i,o]},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,s)=>{var i,o,[r,a,l]=s,c=0;if(r.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)var d=l(n)}for(t&&t(s);c<r.length;c++)o=r[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(d)},s=self.webpackChunk=self.webpackChunk||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var i=n.O(void 0,[805],(()=>n(706)));i=n.O(i)})();